---
date: "2020-12-13T16:34:55+08:00"
title: "计算机网络路由算法"
authors: Nicholas Zhan
categories:
  - Networks
tags:
  - Networks
draft: false
toc: true
---

网络层的主要功能就是将数据包从源主机路由到目标主机。在大多数网络中，数据包需要经过多跳才能到达目的地。路由算法负责为入境数据包选择一条输出线路。路由算法主要分为两大类：自适应算法和非自适应算法。非自适应算法不会根据当前测量或估计的流量和拓扑结构来调整路由决策，整个过程是静态的。而自适应算法会改变路由决策，路由决策的改变会反映网络拓扑结构的变化，通常也会反映网络流量的变化情况，其过程是动态的。

## 最短路径算法
构造一张网络图，图中的每个节点代表一个路由器，每条边代表一条通信线路。为了选择一对给定路由器之间的路由线路，算法只需要找出这对给定路由器之间的最短路径即可。

Dijkstra 算法是一种非常有名的最短路径算法，它能够找出图中源节点到全部目标节点的最短路径。<u>算法要求所有边的权重都为非负值</u>，恰好网络拓扑中不可能存在非负值。

算法在运行过程中维护了一组节点集合 **`S`**，并且从源点 **`s`** 出发到集合 **`S`** 中的每一个节点之间的最小距离都已经被找到。用 **`V`** 表示由图中所有节点构成的集合，算法重复的从节点集 **`V-S`** 中选出到源点 **`s`** 路径最短节点 **`u`**，将 **`u`** 加入集合 **`S`**，然后更新源点 **`s`**到集合 **`V-S`** 中各节点的估计距离。重复这个过程，直到遍历完所有顶点(集合 **`V-S`** 为空)。下图展示了这个过程：

![The execution of Dijkstra's algorithm](/images/computer_networks/fundamentals/the-execution-of-dijstra's-algorithm.png)

最短路径算法的缺点在于其需要知道整个网络的拓扑图。

## 泛洪算法
泛洪(flooding)算法的思想是：将每一个入境的数据包都发送到除该数据包入境线路以外所有的线路。算法的鲁棒性非常好，只要源主机和目标主机之间存在一条可用通路，数据包便可到达目的地。算法能够选择每一条可能的路径（包括最短路径），但算法会产生大量的重复数据包。

## 距离矢量算法
**距离矢量路由(distance vector routing)**算法是一种动态路由算法。算法要求每个路由器都维护一张表，表中记录了当前已知的到网络中其它路由器的最佳距离及所使用的链路。每个路由器回合所有的相邻的其它路由器交换信息并结合获取的信息不断更新自己的表，最终算法收敛时，每个路由器都可以得到到达其它路由器的最佳链路。路由器之间交换信息采用的就是 **RIP**(路由信息协议(Router Information Protocol)。

距离矢量路由算法虽然总能收敛到正确的答案，但这个收敛速度可能非常慢。当网络拓扑结构发生变化之后，可能出现无穷计数问题。算法对好消息(一条更近的链路)的反应非常迅速，对坏消息(某条链路不可用时，尝试切换到其它链路)的反应却异常迟缓。问题的核心在于，<u>当B发现自己联系不上C时，A告诉B它有一条通往C的路径，B无从判断自己是否就在A到C的这个路径上面</u>。

## 链路状态路由
由于距离矢量算法存在无穷计数问题，它后来被**链路状态路由(link state routing)**算法取代了。

链路状态路由算法可以用五个部分来描述，每一个路由器必须完成这五个部分：
1. 发现邻居节点，并了解邻居节点的网络位置
2. 设置到每个邻居节点的距离或成本度量值
3. 构造一个包含所有刚刚获知的链路状态信息包
4. 将这个包发给所有其他的路由器，并接收来自其它路由器的信息包
5. 计算出到每个其它路由器的最短路径

实际上，算法将完整的网络拓扑结构发给了每一个路由器，然后每个路由器运行Dijstra算法就可以找出自己到其它路由器的最短路径。

链路状态路由算法在实际的网络中使用非常广泛，典型的有 IS-IS(Intermediate System-Intermediate System) 和 OSPF(Open Shortest Path First) 。

## 参考文献
1. ANDREW S. TANENBAUM, DAVID J. WETHERALL. *Computer Networks, Fifth Edition*. Pearson, 2011.
2. Thomas H. Cormen, Charles E. Leiserson, Ronald L. Rivest, Clifford Stein. *Introduction to Algorithms, third Edition*. The MIT Press, 2009.
